$base-border-color: gainsboro !default;
$base-border-radius: 3px !default;
$action-color: #477DCA !default;
$dark-gray: #333 !default;
$large-screen: em(860) !default;
$navigation-padding: 1em;
$navigation-background: $green;
$navigation-color: transparentize(white, 0.1);
$navigation-color-hover: white;
$navigation-height: 60px;
$navigation-nav-button-background: $action-color;
$navigation-nav-button-background-hover: lighten($navigation-background, 10%);
$navigation-nav-button-border: 1px solid lighten($navigation-nav-button-background, 20%);
$navigation-menu-button-image-height: 21px;
$navigation-search-background: lighten($navigation-background, 5);
$navigation-search-border: 1px solid darken($navigation-background, 5);
$navigation-active-link-color: transparentize(white, 0.5);
$navigation-submenu-padding: 1em;
$navigation-submenu-width: 12em;
$horizontal-bar-mode: $large-screen;
$logo-image-height: 21px;
$logo-image-width: 80px;

header.navigation {
	@include media ($horizontal-bar-mode) {
		padding-left: flex-gutter();	
	}
	background-color: $navigation-background;
	border-bottom: 1px solid darken($navigation-background, 10);
	min-height: $navigation-height;
	width: 100%;
	z-index: 999;

	.navigation-wrapper {
		@include clearfix;
		@include outer-container;
		position: relative;
		z-index: 9999;
		@include media ($horizontal-bar-mode) {
			width: $max-width - em($logo-image-width / 2);
		}
	}
  
	// Mobile view

	.navigation-menu-button {
		text-indent: -10000px;
		color: $navigation-color;
		display: block;
		float: right;
		line-height: $navigation-height;
		margin: 0;
		padding-right: 1em;
		text-decoration: none;
		text-transform: uppercase;

		@include media ($horizontal-bar-mode) {
			display: none;
		}

		&:focus,
		&:hover {
			color: $navigation-color-hover;
		}
	}

  
	// Nav menu

	nav {
		float: none;
		min-height: $navigation-height;
		z-index: 9999999;

		@include media ($horizontal-bar-mode) {
			float: left;
		}
	}

	ul.navigation-menu {
		clear: both;
		display: none;
		margin: 0 auto;
		overflow: visible;
		padding: 0;
		width: 100%;
		z-index: 9999;

		&.show {
			display: block;
		}

		@include media ($horizontal-bar-mode) {
			display: inline;
			margin: 0;
			padding: 0;
		}
	}

  
	// The nav items

	ul li.nav-link {
		background: darken($navigation-background, 7%);
		border-top: 1px solid darken($navigation-background, 11%);
		display: block;
		line-height: $navigation-height;
		overflow: hidden;
		padding-right: 0.8em;
		text-align: center;
		width: 100%;
		z-index: 9999;

		@include media ($horizontal-bar-mode) {
			border-top: none;
			background: transparent;
			display: inline;
			line-height: $navigation-height;
			text-decoration: none;
			width: auto;
		}

		a {
			color: $navigation-color;
			display: inline-block;
			text-decoration: none;

			@include media ($horizontal-bar-mode) {
				padding-right: 1em;
			}

			&:focus,
			&:hover {
				color: $navigation-color-hover;
			}
		}
	}

	.active-nav-item a {
		border-bottom: 1px solid $navigation-active-link-color;
		padding-bottom: 3px;
	}

  
	// Sub menus

	li.more.nav-link {
		padding-right: 0;
		@include media($horizontal-bar-mode) {
			padding-right: $navigation-submenu-padding;
			padding-right: $navigation-submenu-padding;
		}

		> ul > li:first-child a  {
		@include media($horizontal-bar-mode) {
			padding-top: 1em;
		}
		}

		a {
			text-align: center;
			margin-right: $navigation-submenu-padding;
			@include media($horizontal-bar-mode) {
				text-align: left;			
			}
		}

		> a {
			padding-right: 0.6em;
		}

		> a:after {
			@include position(absolute, auto -0.4em auto auto);
			content: '\25BE';
			color: $navigation-color;
		}
	}

	li.more {
		overflow: visible;
		padding-right: 0;

		a {
			padding-right: 0.8em;
		}

		> a {
			padding-right: 1.6em;
			position: relative;

			@include media($horizontal-bar-mode) {
				margin-right: $navigation-submenu-padding;
			}

			&:after {
				content: none;
				font-size: 1.2em;
				position: absolute;
				right: $navigation-submenu-padding / 2;
			}
		}

		&:focus > .submenu,
		&:hover > .submenu {
			display: block;
		}

		@include media($horizontal-bar-mode) {
			padding-right: 0.8em;
			position: relative;
		}
	}

	ul.submenu {
		display: none;
		padding-left: 0;

		@include media($horizontal-bar-mode) {
			left: -$navigation-submenu-padding;
			position: absolute;
			top: 1.5em;
		}

		.submenu {
			@include media($horizontal-bar-mode) {
				left: $navigation-submenu-width - 0.2em;
				top: 0;
			}
		}

		li {
			display: block;
			padding-right: 0;

			@include media($horizontal-bar-mode) {
				line-height: $navigation-height / 1.3;

				&:first-child > a {
					border-top-left-radius: $base-border-radius;
					border-top-right-radius: $base-border-radius;
				}

				&:last-child > a {
					border-bottom-left-radius: $base-border-radius;
					border-bottom-right-radius: $base-border-radius;
					padding-bottom: 0.7em;
				}
			}

			a {
				background: darken($navigation-background, 7%);
				border-bottom: 1px solid darken($navigation-background, 11%);
				display: inline-block;
				text-align: right;
				width: 100%;

				@include media($horizontal-bar-mode) {
					border-bottom: none;
					background-color: $navigation-background;
					padding-left: $navigation-submenu-padding;
					text-align: left;
					width: $navigation-submenu-width;
				}
			}
		}
	}

  
	// Elements on the far right

	.navigation-tools {
		background: #505050;
		clear: both;
		display: block;
		height: $navigation-height;

		@include media($horizontal-bar-mode) {
			background: transparent;
			clear: none;
			float: right;
		}
	}

  
	// Search bar

	.search-bar {
		$search-bar-border-color: $base-border-color;
		$search-bar-border: 1px solid $search-bar-border-color;
		$search-bar-background: lighten($search-bar-border-color, 10%);

		float: left;
		padding: 0.85em 0.85em 0.7em 0.6em;
		width: 60%;

		form {
			position: relative;

			input[type=search] {
				@include box-sizing(border-box);
				background: $navigation-search-background;
				border-radius: $base-border-radius * 2;
				border: $navigation-search-border;
				color: $navigation-color;
				font-size: 0.9em;
				font-style: italic;
				margin: 0;
				padding: 0.5em 0.8em;
				width: 100%;

				@include media($horizontal-bar-mode) {
					width: 100%;
				}
			}

			button[type=submit] {
				background: $navigation-search-background;
				border: none;
				bottom: 0.3em;
				left: auto;
				outline: none;
				padding: 0 9px;
				position: absolute;
				right: 0.3em;
				top: 0.3em;

				img {
					height: 12px;
					opacity: 0.7;
					padding: 1px;
				}
			}
		}

		@include media($horizontal-bar-mode) {
			display: inline-block;
			position: relative;
			width: 16em;

			input {
				@include box-sizing(border-box);
				display: block;
			}
		}
	}
}

.logo {
	margin-left: flex-gutter();
	@include media($horizontal-bar-mode) {
		margin-left: 0;
	}
	background-repeat: no-repeat;
	background-position: center center;
	text-indent: -99999px;
	float: left;
	width: $logo-image-width;
	height: $logo-image-height;
	margin-top: ($navigation-height - $logo-image-height) / 2;
	max-height: $navigation-height;
	margin-right: 3em;
}

.svg .logo {
	background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNC4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDQzMzYzKSAgLS0+DQo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjgwLjA1NnB4IiBoZWlnaHQ9IjIxLjAyM3B4IiB2aWV3Qm94PSIwIDAgODAuMDU2IDIxLjAyMyIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgODAuMDU2IDIxLjAyMyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8Zz4NCgk8cG9seWdvbiBmaWxsPSIjRkZGRkZGIiBwb2ludHM9IjQ1LjU4MywxOC42ODcgMzkuNTk4LDE4LjY4NyAzOS41OTgsMi45MTkgNDIuMDgsMi4zMzUgNDIuMDgsMC41ODMgMzQuMDQ5LDAuNzI5IDM0LjA0OSwyLjMzNSANCgkJMzYuNTMxLDIuOTE5IDM2LjUzMSwxOC42ODcgMzQuMDQ5LDE5LjI3IDM0LjA0OSwyMS4wMjEgNDguMjEsMjEuMDIxIDQ4LjIxLDE1LjMyOCA0Ni4xNjcsMTUuMzI4IAkiLz4NCgk8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNNjcuMDE1LDEwLjY4N2wtNy41OTEsMC4xNDZ2MS42MDVsMi40ODEsMC41ODR2NC43ODljMCwwLTIuMDQ2LDAuNzMtNC4wOSwwLjczDQoJCWMtMy43OTQsMC02LjQyMi0yLjQ4Mi02LjQyMi03LjczOGMwLTUuNDAyLDIuMTg5LTguMzIxLDYuMTMyLTguMzIxYzIuMTksMCwzLjk0MiwwLjU4MywzLjk0MiwwLjU4M2wwLjg3NCwzLjIxMmgxLjg5OWwwLjE0Ni00LjgxNw0KCQljMCwwLTMuMzU5LTEuNDYtNi41NzItMS40NmMtNS45ODMsMC05Ljc3OSw0LjIzMy05Ljc3OSwxMC45NDljMCw2LjU3LDMuNTA0LDEwLjA3NCw5LjM0MywxMC4wNzRjNC4zNTEsMCw3LjQ0NC0xLjc1Myw3LjQ0NC0xLjc1Mw0KCQl2LTYuMjQ4bDIuMTkxLTAuNTg0VjEwLjY4N3oiLz4NCgk8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNNjkuNTQ0LDUuMzEzYzAtMS40NTksMS4yNTYtMi44MzEsMy44ODQtMi44MzFjMS42MDQsMCwzLjA5NCwwLjUyNCwzLjA5NCwwLjUyNGwwLjk5MywzLjEyNWgxLjg5Nw0KCQlsMC4xNDYtNC45NjRjMCwwLTMuMzg1LTEuMTY4LTYuMTYtMS4xNjhjLTMuNjQ4LDAtNi45MiwxLjcyMy02LjkyLDUuODExYzAsNi45NzksMTAuNTQxLDUuMTEsMTAuNTQxLDkuNjA2DQoJCWMwLDIuMDcyLTIuMzM1LDMuMTI1LTQuNDY5LDMuMTI1Yy0xLjg5NiwwLTMuMjExLTAuNzMtMy4yMTEtMC43M2wtMC41ODMtMy4wNjZoLTIuMzM1djUuMTFjMCwwLDIuOTQ3LDEuMTY4LDYuMDE0LDEuMTY4DQoJCWM0LjA4NywwLDcuNjIxLTIuMDE1LDcuNjIxLTYuMzk1QzgwLjA1Niw4LjA1OCw2OS41NDQsOS43NTMsNjkuNTQ0LDUuMzEzeiIvPg0KCTxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0yNC40MzksMC41MjlsLTIuOTIxLDAuMTQ2bC00LjEyMywxMS4xMzdsMS4yNjIsMy42MDhoNy44MjVsMS4xMSwzLjI0bC0yLjcxNiwwLjU1NnYxLjc1MWg4LjQ2N3YtMS43NTENCgkJbC0yLjQyNC0wLjU1NkwyNC40MzksMC41Mjl6IE0xOS42NzgsMTMuMDg1bDMuMDY2LTguNzg4bDIuOTQ5LDguNzg4SDE5LjY3OHoiLz4NCgk8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNMTEuOTcyLDAuNDI5bC0yLjkyLDAuMTQ2TDIuMzk1LDE4LjU2MkwwLDE5LjExNXYxLjc1Mmg4LjAyOXYtMS43NTJsLTIuNzQ0LTAuNTU0bDEuMTM4LTMuMjQyaDcuNTkyDQoJCWwxLjExLDMuMjQybC0yLjcxNSwwLjU1NHYxLjc1Mmg4LjQ2N3YtMS43NTJsLTIuNDIzLTAuNTU0TDExLjk3MiwwLjQyOXogTTcuMjEyLDEyLjk4M2wzLjA2Ni04Ljc4OWwyLjk1LDguNzg5SDcuMjEyeiIvPg0KPC9nPg0KPC9zdmc+DQo=');
}

.no-svg .logo {
	background-image: url('../img/logo.png');
}
 
.navigation-menu-button {
	background-image: url('../img/navigation-button.png');
	background-repeat: no-repeat;
	background-position: center center;
	width: $navigation-height;
	text-indent: -99999px;
}
 
.svg .navigation-menu-button {
	background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNC4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDQzMzYzKSAgLS0+DQo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjI1cHgiIGhlaWdodD0iMjVweCIgdmlld0JveD0iLTMuNSAtNS4yMjEgMjUgMjUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgLTMuNSAtNS4yMjEgMjUgMjUiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPHJlY3QgeD0iLTIuODU4IiB5PSItMy4yMjEiIGZpbGw9IiNGRkZGRkYiIHdpZHRoPSIyMy41NSIgaGVpZ2h0PSIzLjI1MyIvPg0KCTxyZWN0IHg9Ii0yLjg1OCIgeT0iNS41OTYiIGZpbGw9IiNGRkZGRkYiIHdpZHRoPSIyMy41NSIgaGVpZ2h0PSIzLjI1NyIvPg0KCTxyZWN0IHg9Ii0yLjg1OCIgeT0iMTQuNDEyIiBmaWxsPSIjRkZGRkZGIiB3aWR0aD0iMjMuNTUiIGhlaWdodD0iMy4yNTUiLz4NCjwvZz4NCjwvc3ZnPg0K');
}

.no-svg .navigation-menu-button {
	background-image: url('../img/logo.png');
}
 
 
 
 